!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ccApp=e()}(this,function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?e(Object(i),!0).forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))})}return o}var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(t,e){return t(e={exports:{}},e.exports),e.exports}t(function(t){var e=function(i){var s,t=Object.prototype,u=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",r=e.toStringTag||"@@toStringTag";function a(t,e,n,r){var i,a,c,s,o=e&&e.prototype instanceof v?e:v,u=Object.create(o.prototype),l=new j(r||[]);return u._invoke=(i=t,a=n,c=l,s=d,function(t,e){if(s===h)throw new Error("Generator is already running");if(s===m){if("throw"===t)throw e;return A()}for(c.method=t,c.arg=e;;){var n=c.delegate;if(n){var r=O(n,c);if(r){if(r===y)continue;return r}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(s===d)throw s=m,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);s=h;var o=f(i,a,c);if("normal"===o.type){if(s=c.done?m:p,o.arg===y)continue;return{value:o.arg,done:c.done}}"throw"===o.type&&(s=m,c.method="throw",c.arg=o.arg)}}),u}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}i.wrap=a;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function c(){}function l(){}var g={};g[o]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(I([])));b&&b!==t&&u.call(b,o)&&(g=b);var S=l.prototype=v.prototype=Object.create(g);function x(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function T(s){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,o){var i=f(s[t],s,n);if("throw"!==i.type){var a=i.arg,c=a.value;return c&&"object"==typeof c&&u.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):Promise.resolve(c).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}o(i.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function O(t,e){var n=t.iterator[e.method];if(n===s){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=s,O(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,y;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=s),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function I(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=s,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:s,done:!0}}return c.prototype=S.constructor=l,l.constructor=c,l[r]=c.displayName="GeneratorFunction",i.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===c||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,r in t||(t[r]="GeneratorFunction")),t.prototype=Object.create(S),t},i.awrap=function(t){return{__await:t}},x(T.prototype),T.prototype[n]=function(){return this},i.AsyncIterator=T,i.async=function(t,e,n,r){var o=new T(a(t,e,n,r));return i.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},x(S),S[r]="Generator",S[o]=function(){return this},S.toString=function(){return"[object Generator]"},i.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},i.values=I,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=s)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=s),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=s),y}},i}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}});var o,i=t(function(t,e){var o=d&&d.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t,e,n){this.name=t,this.version=e,this.os=n};e.BrowserInfo=a;var n=function(t){this.version=t,this.name="node",this.os=process.platform};e.NodeInfo=n;var c=function(){this.bot=!0,this.name="bot",this.version=null,this.os=null};e.BotInfo=c;var s=3,u=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],i=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]];function r(i){var t=""!==i&&u.reduce(function(t,e){var n=e[0],r=e[1];if(t)return t;var o=r.exec(i);return!!o&&[n,o]},!1);if(!t)return null;var e=t[0],n=t[1];if("searchbot"===e)return new c;var r=n[1]&&n[1].split(/[._]/).slice(0,3);return r?r.length<s&&(r=o(r,function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(s-r.length))):r=[],new a(e,r.join("."),l(i))}function l(t){for(var e=0,n=i.length;e<n;e++){var r=i[e],o=r[0];if(r[1].test(t))return o}return null}function f(){return"undefined"!=typeof process&&process.version?new n(process.version.slice(1)):null}e.detect=function(t){return t?r(t):"undefined"!=typeof navigator?r(navigator.userAgent):f()},e.parseUserAgent=r,e.detectOS=l,e.getNodeVersion=f});(o=i)&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")&&o.default;i.BrowserInfo,i.NodeInfo,i.BotInfo;var a=i.detect,c=(i.parseUserAgent,i.detectOS,i.getNodeVersion,t(function(t){var i,n;i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];0<t;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],n=0;n<t.length;n+=3)for(var r=t[n]<<16|t[n+1]<<8|t[n+2],o=0;o<4;o++)8*n+6*o<=8*t.length?e.push(i.charAt(r>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],n=0,r=0;n<t.length;r=++n%4)0!=r&&e.push((i.indexOf(t.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|i.indexOf(t.charAt(n))>>>6-2*r);return e}},t.exports=n})),u={utf8:{stringToBytes:function(t){return u.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(u.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}},l=u,f=t(function(t){function e(t,e){var n=g.wordsToBytes(function(t){t.constructor==String?t=w.stringToBytes(t):"undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());var e=g.bytesToWords(t),n=8*t.length,r=[],o=1732584193,i=-271733879,a=-1732584194,c=271733878,s=-1009589776;e[n>>5]|=128<<24-n%32,e[15+(64+n>>>9<<4)]=n;for(var u=0;u<e.length;u+=16){for(var l=o,f=i,d=a,p=c,h=s,m=0;m<80;m++){if(m<16)r[m]=e[u+m];else{var y=r[m-3]^r[m-8]^r[m-14]^r[m-16];r[m]=y<<1|y>>>31}var v=(o<<5|o>>>27)+s+(r[m]>>>0)+(m<20?1518500249+(i&a|~i&c):m<40?1859775393+(i^a^c):m<60?(i&a|i&c|a&c)-1894007588:(i^a^c)-899497514);s=c,c=a,a=i<<30|i>>>2,i=o,o=v}o+=l,i+=f,a+=d,c+=p,s+=h}return[o,i,a,c,s]}(t));return e&&e.asBytes?n:e&&e.asString?r.bytesToString(n):g.bytesToHex(n)}var g,w,r;g=c,w=l.utf8,r=l.bin,e._blocksize=16,e._digestsize=20,t.exports=e});function p(t){for(var e="".concat(t,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return""}var h=window.localStorage;function m(t,e){h.setItem(t,e)}function y(t){return h.getItem(t)}var v="_cc2_email",g="_cc2_cId",w="_cc2_cv",b="_cc2_vp",S=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if("undefined"!=typeof Element&&!Element.prototype.matches){var x=Element.prototype;x.matches=x.matchesSelector||x.mozMatchesSelector||x.msMatchesSelector||x.oMatchesSelector||x.webkitMatchesSelector}var T=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}};function O(t,e,n,r,o){var i=function(e,n,t,r){return function(t){t.delegateTarget=T(t.target,n),t.delegateTarget&&r.call(e,t)}}.apply(this,arguments);return t.addEventListener(n,i,o),{destroy:function(){t.removeEventListener(n,i,o)}}}var E=function(t,e,n,r,o){return"function"==typeof t.addEventListener?O.apply(null,arguments):"function"==typeof n?O.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return O(t,e,n,r,o)}))},_={},j=_.toString,I=/^[\w-]*$/,A=document.createElement("table"),B=document.createElement("tr"),C=(document.createElement("tbody"),document.createElement("div"),[].slice);function L(t){return t?_[j.call(t)]||"object":String(t)}function k(t){return"object"===L(t)}function P(t){return null!=t&&t===t.window}function N(t){return k(t)&&!P(t)&&Object.getPrototypeOf(t)===Object.prototype}var W=Array.isArray||function(t){return t instanceof Array};function F(e){for(var n,t=arguments.length,r=new Array(1<t?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return"boolean"==typeof e&&(n=e,e=r.shift()),r.forEach(function(t){!function t(e,n,r){for(var o in n)r&&(N(n[o])||W(n[o]))?(N(n[o])&&!N(e[o])&&(e[o]={}),W(n[o])&&!W(e[o])&&(e[o]=[]),t(e[o],n[o],r)):void 0!==n[o]&&(e[o]=n[o])}(e,t,n)}),e}function D(t){var e=n(t);return"object"===e?L(t):e}function M(t){return"function"===D(t)}function R(t,e){if(i=!!(o=t)&&"length"in o&&o.length,"function"!==(a=L(o))&&!P(o)&&("array"===a||0===i||"number"==typeof i&&0<i&&i-1 in o)){for(var n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t}else for(var r in t)if(!1===e.call(t[r],r,t[r]))return t;var o,i,a;return t}var G=encodeURIComponent;function $(t,e){var n=[];return n.add=function(t,e){M(e)&&(e=e()),null==e&&(e=""),n.push("".concat(G(t),"=").concat(G(e)))},function o(i,t,a,c){var s=W(t),u=k(t);R(t,function(t,e){var n=t,r=D(e);c&&(n=a?c:"".concat(c,"[").concat(u||"object"===r||"array"===r?t:"","]")),!c&&s?i.add(e.name,e.value):"array"===r||!a&&"object"===r?o(i,e,a,n):i.add(n,e)})}(n,t,e),n.join("&").replace(/%20/g,"+")}var q=0;function U(){}function V(){var t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2];return M(e)&&(n=arguments.length<=1?void 0:arguments[1],e=void 0),M(n)||(n=U),r({url:t,success:n},e)}function X(){return J.apply(this,arguments)}function J(){var c;return c=regeneratorRuntime.mark(function t(i){var a,c,s,u,l,f,d,p,h,m,y,v,g,w,b,S,x,T,O,E,_,j,I,A,B,C,L,k,P,N,W,M;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(M=function(t,e){if(4===A.readyState)if(A.onreadystatechange=U,clearTimeout(I),200<=A.status&&A.status<300||304===A.status||0===A.status&&"file:"===j){if(T=T||w(b.mimeType||A.getResponseHeader("content-type")),"arraybuffer"===A.responseType||"blob"===A.responseType)N=A.response;else{N=A.responseText;try{N=g(N,T,b),"script"===T?(0,eval)(N):"xml"===T?N=A.responseXML:"json"===T&&(N=f.test(N)?null:JSON.parse(N))}catch(t){W=t}if(W)return v(W,"parsererror",A,b,e)}y(N,A,b,e)}else v(A.statusText||null,A.status?"error":"abort",A,b,e)},w=function(t){if(t){if((t=t.split(";",2)[0])===l)return"html";if(t===u)return"json";if(c.test(t))return"script";if(s.test(t))return"xml"}return"text"},g=function(t,e,n){return n.dataFilter===U?t:n.dataFilter.call(n.context,t,e)},v=function(t,e,n,r,o){r.error.call(r.context,n,e,t),o&&o(),m(e,n,r)},y=function(t,e,n,r){var o="success";n.success.call(n.context,t,o,e),r&&r(),m(o,e,n)},m=function(t,e,n){n.complete.call(n.context,e,t),q--},h=function(t,e){if(!1===e.beforeSend.call(e.context,t,e))return!1},a=window.document,c=/^(?:text|application)\/javascript/i,s=/^(?:text|application)\/xml/i,u="application/json",l="text/html",f=/^\s*$/,(d=a.createElement("a")).href=window.location.href,p={script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:l,text:"text/plain"},b=F({},i||{}),q++,b.method?b.method=b.method.toUpperCase():b.method="GET",b.url||(b.url=window.location.toString()),-1<(S=b.url.indexOf("#"))&&(b.url=b.url.slice(0,S)),b.crossDomain||(r=b.url,o=void 0,(o=document.createElement("a")).href=r,o.href=o.href,x=o,b.crossDomain="".concat(d.protocol,"//").concat(d.host)!=="".concat(x.protocol,"//").concat(x.host)),("number"!==D(b.timeout)||b.timeout<0)&&(b.timeout=0),b.processData&&b.data&&"string"!==D(b.data)&&(FormData&&b.data instanceof FormData?b.contentType="multipart/form-data":b.contentType&&-1<b.contentType.indexOf("application/json")?b.data=JSON.stringify(b.data):b.data=$(b.data,b.traditional)),b.data&&"GET"===b.method&&(b.url=(e=b.url,""===(n=b.data)?e:"".concat(e,"&").concat(n).replace(/[&?]{1,2}/,"?")),b.data=void 0),T=b.dataType,O=p[T],E={},_=function(t,e){E[t.toLowerCase()]=[t,e]},j=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:window.location.protocol,A=new window.XMLHttpRequest,B=A.setRequestHeader,b.crossDomain||_("X-Requested-With","XMLHttpRequest"),_("Accept",O||"*/*"),(O=b.mimeType||O)&&(-1<O.indexOf(",")&&(O=O.split(",",2)[0]),A.overrideMimeType&&A.overrideMimeType(O)),b.headers)for(C in b.headers)C&&_(C,b.headers[C]);if((b.contentType||!1!==b.contentType&&b.data&&"GET"!==b.method)&&_("Content-Type",b.contentType||"application/x-www-form-urlencoded"),A.setRequestHeader=_,!1===h(A,b))return A.abort(),q--,v(null,"abort",A,b),t.abrupt("return",A);t.next=45;break;case 45:if(L=!("async"in b)||b.async,A.open(b.method,b.url,L,b.username,b.password),b.xhrFields)for(k in b.xhrFields)k&&(A[k]=b.xhrFields[k]);for(P in E)P&&B.apply(A,E[P]);if(0<b.timeout&&(I=setTimeout(function(){A.onreadystatechange=U,A.abort(),v(null,"timeout",A,b)},b.timeout)),W=!1,b.await)return t.next=54,new Promise(function(t){A.onreadystatechange=function(){M(t)},A.send(b.data?b.data:null)});t.next=55;break;case 54:return t.abrupt("return",W||N);case 55:return A.onreadystatechange=M,A.send(b.data?b.data:null),t.abrupt("return",A);case 58:case"end":return t.stop()}var e,n,r,o},t)}),(J=function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function o(t){s(r,e,n,o,i,"next",t)}function i(t){s(r,e,n,o,i,"throw",t)}o(void 0)})}).apply(this,arguments)}function H(t){if(N(t))return X(F({},H.defaultSettings,t))}H.defaultSettings={method:"GET",beforeSend:U,success:U,error:U,complete:U,context:null,xhr:function(){return new window.XMLHttpRequest},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:U},H.get=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return X(F({},H.defaultSettings,V.apply(null,e)))},H.getJSON=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=V.apply(null,e);return r.dataType="json",X(F({},H.defaultSettings,r))},H.post=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=V.apply(null,e);return r.method="POST",X(F({},H.defaultSettings,r))},H.postJSON=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=V.apply(null,e);return r.dataType="json",r.method="POST",X(F({},H.defaultSettings,r))},H.put=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=V.apply(null,e);return r.method="PUT",X(F({},H.defaultSettings,r))},H.delete=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=V.apply(null,e);return r.method="DELETE",X(F({},H.defaultSettings,r))},H.active=function(){return q};var K={endpoint:"",addCartForm:"form[data-cart-item-add]",addCartButton:'[id="form-action-addToCart"]',ajaxButton:"[data-cart-item-add]",country:"US"},z=a();return{options:{},clientId:p(g),gid:p("_ga"),captureEmail:function(){E("input","change",function(t){var e=t.target.value;S.test(e)&&m(v,e.trim())});var t,e=y("cartConnectEmail");e&&(m(v,e),t="cartConnectEmail",h.removeItem(t))},applyEmailToCart:function(){var e=this,n=y(v);n&&H.post("/subscribe.php",{data:{action:"subscribe",nl_email:n,nl_first_name:"",check:1}}),H.get("/api/storefront/carts?include=lineItems.digitalItems.options,lineItems.physicalItems.options",function(t){t.forEach(function(t){n?H.post("/api/storefront/checkouts/".concat(t.id,"/billing-address/"),{data:{email:n},contentType:"application/json; charset=utf-8"},function(t){t.cart&&t.cart.id&&e.sendCart(t.cart)}):e.sendCart(t)})})},view:function(){if(window.__cc_data__){var t=this.options,e=window.__cc_data__,n=e.type,r=e.data;if(r){var o=y(b);(o=o?JSON.parse(o):{product:{},category:{},brand:{}})[n]||(o[n]={});var i=r["".concat(n,"Id")];"brand"===n&&(i=r.name.replace(/[^\w]|[\s]/g,""));o[n][i]||(o[n][i]=1,m(b,JSON.stringify(o)),this.callServer("brand"===n?"".concat(t.endpoint,"/brands/view"):"".concat(t.endpoint,"/").concat({product:"products",category:"categories"}[n],"/").concat(r["".concat(n,"Id")],"/view"),"POST",r))}}},sendCart:function(t){var e=this.options,n=[];for(var r in t.lineItems)"physicalItems"!==r&&"digitalItems"!==r||t.lineItems[r].forEach(function(t){n.push({productId:t.productId,variantId:t.variantId,sku:t.sku,name:t.name,url:t.url,image:t.imageUrl,price:t.salePrice,quantity:t.quantity,total:t.extendedSalePrice,options:t.options})});this.callServer("".concat(e.endpoint,"/carts"),"POST",{id:t.id,email:t.email,cartAmount:t.cartAmount,updatedTime:t.updatedTime,createdTime:t.createdTime,items:n,country:e.country})},main:function(){var r=this,o=r.options;(Array.isArray(o.addCartForm)?o.addCartForm:[o.addCartForm]).forEach(function(t){E(t,"submit",function(t){var e=function(t,e){var n,r="#"===e[0],o=!r&&"."===e[0],i=r||o?e.slice(1):e,a=I.test(i);if(t.getElementById&&a&&r){var c=t.getElementById(i);return c?[c]:[]}return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:(n=a&&!r&&t.getElementsByClassName?o?t.getElementsByClassName(i):t.getElementsByTagName(e):t.querySelectorAll(e),C.call(n))}(t.target,o.addCartButton);if(e.length)var n=setInterval(function(){e[0].hasAttribute("disabled")||(n=clearInterval(n),r.applyEmailToCart())},200);else r.applyEmailToCart()})}),(Array.isArray(o.ajaxButton)?o.ajaxButton:[o.ajaxButton]).forEach(function(t){E(t,"click",function(){setTimeout(function(){r.applyEmailToCart()},2500)})});var t=window.location.href;(/\/cart.php/.test(t)||/\/checkout/.test(t))&&r.applyEmailToCart()},getClientId:function(e){var n=this,t=n.clientId,r=n.options,o=y(w);o=o?parseInt(o,10):0;var i=new Date,a=parseInt("".concat(i.getFullYear().toString()).concat((i.getMonth()+1).toString()).concat(i.getDate().toString()),10);t&&o===a?"function"==typeof e&&e(t):n.callServer("".concat(r.endpoint,"/client-id"),"POST",{domain:window.location.host,email:y(v)},function(t){m(w,a),t.email&&m(v,t.email),m(b,'{"product":{},"category":{},"brand":{}}'),t.clientId&&(n.clientId=t.clientId,function(t,e,n){var r=new Date;r.setTime(r.getTime()+1e3*n);var o="expires=".concat(r.toUTCString());document.cookie="".concat(t,"=").concat(e,";").concat(o,";path=/")}(g,n.clientId,31536e3),e(n.clientId))})},callServer:function(t,e,n,r){var o=this.clientId,i=JSON.stringify(n),a=Math.round((new Date).getTime()/1e3),c=f(i+o+a);H({url:"".concat(t,"?apiKey=").concat(this.options.apiKey),method:e,data:{data:i,clientId:o,gid:this.gid,browser:z.name,browserVersion:z.version,os:z.os,country:this.options.country,timestamp:a,checksum:c},crossDomain:!0,xhrFields:{withCredentials:!0},success:function(t){"function"==typeof r&&r(t)}})},init:function(t){var e=this;this.options=r({},K,{},t),this.options.endpoint=this.options.endpoint.replace(/\/*\s*$/,""),this.getClientId(function(){e.captureEmail(),e.main(),e.view()}),this.gid||setTimeout(function(){e.gid=p("_ga"),e.gid&&e.getClientId()},5e3)}}});
